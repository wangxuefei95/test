{"version":3,"sources":["webpack:///./src/modules/table/index.vue?4a8a","webpack:///./src/modules/table/util.js","webpack:///./src/modules/table/print-table.js","webpack:///src/modules/table/index.vue","webpack:///./src/modules/table/index.vue?b03b","webpack:///./src/modules/table/index.vue","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["_vm","this","_h","$createElement","_c","_self","attrs","columns","list","headers","staticRenderFns","getAllColumns","result","forEach","column","children","push","apply","convertToRows","originColumns","maxLevel","traverse","parent","level","colSpan","subColumn","rows","i","allColumns","console","log","JSON","stringify","rowSpan","label","prop","getColumns","genColumn","map","length","table","_columns","props","type","Array","default","columnCount","Number","spanMethod","Function","headMethod","data","render","createElement","context","row","index","getRowRender","methods","rowIndex","cellIndex","getSpan","rowspan","colspan","fn","isArray","component","$","$map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments","undefined"],"mappings":"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","file":"static/js/chunk-701a6a6c.cf4cb892.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('print-table',{attrs:{\"columns\":_vm.columns,\"list\":_vm.list,\"headers\":_vm.headers}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const getAllColumns = (columns) => {\r\n    const result = [];\r\n    columns.forEach((column) => {\r\n        if (column.children) {\r\n            result.push(column);\r\n            result.push.apply(result, getAllColumns(column.children));\r\n        } else {\r\n            result.push(column);\r\n        }\r\n    });\r\n    return result;\r\n};\r\n\r\nconst convertToRows = (originColumns) => {\r\n    let maxLevel = 1\r\n    const traverse = (column, parent) => {\r\n        if (parent) {\r\n            column.level = parent.level + 1\r\n            if (maxLevel < column.level) {\r\n                maxLevel = column.level\r\n            }\r\n        }\r\n        if (column.children) {\r\n            let colSpan = 0\r\n            column.children.forEach((subColumn) => {\r\n                traverse(subColumn, column)\r\n                colSpan += subColumn.colSpan\r\n            })\r\n            column.colSpan = colSpan\r\n        } else {\r\n            column.colSpan = 1\r\n        }\r\n    }\r\n\r\n    originColumns.forEach((column) => {\r\n        column.level = 1\r\n        traverse(column)\r\n    })\r\n\r\n    const rows = []\r\n    for (let i = 0; i < maxLevel; i++) {\r\n        rows.push([])\r\n    }\r\n\r\n    const allColumns = getAllColumns(originColumns)\r\n    \r\n\r\n    console.log(JSON.stringify(allColumns))\r\n\r\n    allColumns.forEach((column) => {\r\n        if (!column.children) {\r\n            column.rowSpan = maxLevel - column.level + 1\r\n        } else {\r\n            column.rowSpan = 1\r\n        }\r\n        rows[column.level - 1].push(column)\r\n    })\r\n\r\n    return rows\r\n}\r\n\r\n\r\nlet headers = [\r\n    {\r\n        label: '商品名称',\r\n        children: [\r\n            {\r\n                prop: 'name1', label: '商品名称1'\r\n            },\r\n            {\r\n                prop: 'name2', label: '商品名称2'\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        label: '价格',\r\n        children: [\r\n            {\r\n                label: '商品单价'\r\n            },\r\n            {\r\n                label: '商品总价',\r\n                children: [\r\n                    {\r\n                        prop: 'priceP', label: '商品最高价'\r\n                    },\r\n                    {\r\n                        prop: 'priceP', label: '商品均价'\r\n                    },\r\n                    {\r\n                        prop: 'priceP', label: '商品最低价'\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        prop: 'address', label: '产地'\r\n    },\r\n    {\r\n        label: '日期',\r\n        // children: [\r\n        //     {\r\n        //         prop: 'startDate', label: '生产日期'\r\n        //     },\r\n        //     // {\r\n        //     //     prop: 'endDate', label: '过期日期'\r\n        //     // }\r\n        // ]\r\n    }\r\n]\r\n\r\n\r\n\r\nexport let rows = convertToRows(headers)\r\nconsole.table(rows)\r\nconsole.log(JSON.stringify(rows))\r\n\r\nfunction getColumns(originColumns) {\r\n    let result = []\r\n    function genColumn(columns) {\r\n        columns.map(column => {\r\n            if (column.children && column.children.length) {\r\n                genColumn(column.children)\r\n            } else {\r\n                result.push(column)\r\n            }\r\n        })\r\n    }\r\n    genColumn(originColumns)\r\n    return result\r\n}\r\n\r\n\r\nexport const _columns = getColumns(headers)\r\nconsole.log(JSON.stringify(getColumns(headers)))","import {rows, _columns} from './util'\r\nimport './table.scss'\r\nexport default {\r\n    props: {\r\n        list: {\r\n            type: Array,\r\n            default: function () {\r\n                return []\r\n            }\r\n        },\r\n        columns: {\r\n            type: Array,\r\n            default: function () {\r\n                return []\r\n            }\r\n        },\r\n        headers: {\r\n            type: Array,\r\n            default: function () {\r\n                return []\r\n            }\r\n        },\r\n        columnCount: [Number],\r\n        spanMethod: Function,\r\n        headMethod: Function,\r\n    },\r\n\r\n    data() {\r\n        return {\r\n\r\n        }\r\n    },\r\n\r\n    render(createElement, context) {\r\n        let headers = rows\r\n        return (\r\n            <div class=\"table-wrap\">\r\n                <table border=\"0\" cellPadding=\"4\" cellSpacing=\"0\" width=\"100%\" align=\"center\">\r\n                    <thead>\r\n                    {\r\n                        headers.map(columns => <tr>{columns.map(column => <td align=\"center\" rowspan={column.rowSpan} colspan={column.colSpan}>{column.label}</td>)}</tr>)\r\n                    }\r\n                    </thead>\r\n                    <tbody>\r\n                    { \r\n                        this.list.map((row, index) => this.getRowRender(row, index)) \r\n                    }\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        )\r\n    },\r\n\r\n    methods: {\r\n        getRowRender(row, rowIndex) {\r\n            let columns = _columns\r\n            return (<tr>\r\n                {\r\n                    columns.map((column, cellIndex) => {\r\n                        const {rowspan, colspan} = this.getSpan(row, column, rowIndex, cellIndex)\r\n                        if (!rowspan || !colspan) {\r\n                            return null\r\n                        }\r\n                        // 列信息\r\n                        // const columnData = {...column}\r\n                        console.log(column.prop, row, row[column.prop])\r\n                        return (\r\n                            <td rowspan={rowspan} colspan={colspan}>{row[column.prop]}</td>\r\n                        )\r\n                    })\r\n                }\r\n            </tr>)\r\n        },\r\n\r\n        // 获取需要合并的行数、列数\r\n        getSpan(row, column, rowIndex, cellIndex) {\r\n            let rowspan = 1\r\n            let colspan = 1\r\n            let fn = this.spanMethod\r\n            if (typeof fn === 'function') {\r\n                let result = this.spanMethod({row, column, rowIndex, cellIndex})\r\n                if (Array.isArray(result)) {\r\n                    rowspan = result[0]\r\n                    colspan = result[1]\r\n                } else if (typeof result === 'object') {\r\n                    rowspan = result.rowspan\r\n                    colspan = result.colspan\r\n                }\r\n            }\r\n            return {rowspan, colspan}\r\n        }\r\n    }\r\n}\r\n","<template>\r\n    <div>\r\n        <print-table\r\n            :columns=\"columns\"\r\n            :list=\"list\"\r\n            :headers=\"headers\"\r\n            >\r\n\r\n        </print-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import './util.js'\r\n    import PrintTable from './print-table'\r\n    export default {\r\n        components: {\r\n            PrintTable\r\n        },\r\n        data() {\r\n            return {\r\n                list: [\r\n                    {name1: '辣条', price: 0, num: 0, priceTotal: 0, address: '自产' },\r\n                    {name1: '辣条1', price: 1, num: 10, priceTotal: 10, address: '自产' },\r\n                    {name1: '辣条2', price: 2, num: 10, priceTotal: 20, address: '自产' },\r\n                    {name1: '辣条3', price: 3, num: 10, priceTotal: 30, address: '自产' },\r\n                    {name1: '辣条4', price: 4, num: 10, priceTotal: 40, address: '自产' },\r\n                    {name1: '辣条5', price: 5, num: 10, priceTotal: 50, address: '自产' },\r\n                ],\r\n                columns: [\r\n                    { prop: 'name', label: '商品名称' },\r\n                    { prop: 'price', label: '单价' },\r\n                    { prop: 'num', label: '数量' },\r\n                    { prop: 'totalPrice', label: '总价' },\r\n                    { prop: 'addr', label: '产地' },\r\n                ],\r\n                headers: [\r\n                    {\r\n                        prop: 'name', label: '商品名称',\r\n                        children: [\r\n                            {\r\n                                prop: 'name1', label: '商品名称1'\r\n                            },\r\n                            {\r\n                                prop: 'name2', label: '商品名称2'\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        prop: 'price', label: '价格',\r\n                        children: [\r\n                            {\r\n                                prop: 'price', label: '商品单价'\r\n                            },\r\n                            {\r\n                                prop: 'priceTotal', label: '商品总价',\r\n                                children: [\r\n                                    {\r\n                                        prop: 'priceP', label: '商品最高价'\r\n                                    },\r\n                                    {\r\n                                        prop: 'priceP', label: '商品均价'\r\n                                    },\r\n                                    {\r\n                                        prop: 'priceP', label: '商品最低价'\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        prop: 'address', label: '产地'\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        methods: {\r\n            spanMethod({row, column, rowIndex, cellIndex}) {\r\n                // console.log(rowIndex, cellIndex)\r\n                // if (rowIndex%2 === 0) {\r\n                //     return { rowspan: 2, colspan: 1 }\r\n                // }\r\n                // else if (cellIndex === 4) {\r\n                //     return { rowspan: this.list.length, colspan: 1 }\r\n                // }\r\n                if (cellIndex === 4) {\r\n                    return { rowspan: this.list.length, colspan: 1 }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3ec600cc&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ec600cc\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}